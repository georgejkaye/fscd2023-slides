\begin{frame}
    \frametitle{Now what?}

    \centering

    \LARGE
    We can interpret \alert{terms} as \alert{graphs}

    \pause

    Now to \alert{reason} with them!

    \pause

    Applying equations
    \pause
    \(\leftrightarrow\)
    Graph rewriting

    \pause
    \alert{Double pushout (DPO) rewriting}

\end{frame}
\begin{frame}[fragile]
    \frametitle{One rule for them}

    \centering

    \dsptikzfig{strings/structure/cartesian/naturality-copy-lhs}[f][white][m][n]
    \(=\)
    \dsptikzfig{strings/structure/cartesian/naturality-copy-rhs}[f][white][m][n]

    \vspace{1em}

    \pause

    \begin{tikzcd}[column sep = small]
        \dsptikzfig{graphs/dpo/cartesian/copy/l}[f]
        &
        \arrow{l}
        \dsptikzfig{graphs/dpo/cartesian/copy/k}[f]
        \arrow{r}
        &
        \dsptikzfig{graphs/dpo/cartesian/copy/r}[f]
    \end{tikzcd}

\end{frame}
\begin{frame}
    \frametitle{Do the double pushout}

    \centering
    \newcommand{\dposcale}{0.6}
    \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/l}[f]}
        \arrow[visible on=<2->]{d}
        \&
        \arrow{l}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/k}[f]}
        \arrow[visible on=<3->]{d}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/r}[f]}
        \arrow[visible on=<4->]{d}
        \\
        |[visible on=<2->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/g}[f]}
        \&
        |[visible on=<3->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/c}}
        \arrow[visible on=<3->]{l}
        \arrow[visible on=<4->]{r}
        \&
        |[visible on=<4->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/h}}
        \\
        \&
        |[visible on=<2->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/j}}
        \arrow[visible on=<2->]{ul}
        \arrow[visible on=<3->]{u}
        \arrow[visible on=<4->]{ur}
    \end{tikzcd}

    \visible<2>{\alert{Matching}}
    \qquad\qquad
    \visible<3>{\alert{Pushout complement}}
    \qquad\qquad
    \visible<4>{\alert{Pushout!}}
\end{frame}
\begin{frame}
    \frametitle{Give me complements}

    \centering
    \LARGE
    Which pushout complements are \alert{valid} rewrites?

    \pause
    \large
    \alert{Symmetric monoidal} setting? \alert{Exactly one} pushout complement valid

    \scalebox{0.5}{\hypergraphpeople}

    \visible<4->{
        \alert{Traced comonoid} setting? \alert{Some} pushout complements valid

        \scalebox{0.5}{\meanddan}
    }

    \visible<3->{
        \alert{Frobenius} setting? \alert{All} pushout complements valid

        \scalebox{0.5}{\hypergraphpeople}
    }



\end{frame}
\begin{frame}
    \frametitle{I need some validation}

    \centering

    \newcommand{\dposcale}{0.45}
    \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/l}[f]}
        \arrow{d}
        \&
        \arrow{l}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/k}[f]}
        \arrow{d}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/cartesian/copy/r}[f]}
        \arrow{d}
        \\
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/g}[f]}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/c}}
        \arrow{l}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/h}}
        \\
        \&
        \arrow{ul}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/example/j}}
        \arrow{u}
        \arrow{ur}
    \end{tikzcd}

    \pause
    This cospan is \alert{partial left-monogamous}:

    % \hspace{-5em}
    \begin{minipage}{0.2\textwidth}
        \alert{Inputs} of term

        \alert{Outputs} of rule
    \end{minipage}
    \begin{minipage}{0.55\textwidth}
        \newcommand{\boundaryscale}{0.5}
        \begin{tikzcd}[column sep = small, ampersand replacement=\&]
            \scalebox{\boundaryscale}{\dsptikzfig{graphs/dpo/example/mplusj}[f]}
            \arrow{r}
            \&
            \scalebox{\boundaryscale}{\dsptikzfig{graphs/dpo/example/c}[f]}
            \&
            \arrow{l}
            \scalebox{\boundaryscale}{\dsptikzfig{graphs/dpo/example/iplusn}[f]}
        \end{tikzcd}
    \end{minipage}
    \begin{minipage}{0.2\textwidth}
        \alert{Inputs} of rule

        \alert{Outputs} of term
    \end{minipage}
\end{frame}
\begin{frame}
    \frametitle{It's two, actually}

    \centering
    \begin{minipage}{0.3\textwidth}
        \centering
        \dsptikzfig{graphs/dpo/non-unique/rule-lhs}
        \(=\)
        \dsptikzfig{graphs/dpo/non-unique/rule-rhs}

        \vspace{3em}

        \only<1>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-1}}}%
        \only<2>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-2a}}}%
        \only<3>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-3a}}}%
        \only<4>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-4a}}}%
    \end{minipage}
    \quad
    \begin{minipage}{0.65\textwidth}
        \newcommand{\dposcale}{0.75}
        \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/l}}
            \arrow{d}
            \&
            \arrow{l}
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/k}}
            \arrow{d}
            \arrow{r}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/r}}
            \arrow{d}
            \\
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/g}}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/c-1}}
            \arrow{l}
            \arrow{r}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/h-1}}
            \\
            \&
            \arrow{ul}
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/j-1}}
            \arrow{u}
            \arrow{ur}
        \end{tikzcd}
    \end{minipage}
\end{frame}
\begin{frame}
    \frametitle{It's two, actually}

    \centering
    \begin{minipage}{0.3\textwidth}
        \centering
        \dsptikzfig{graphs/dpo/non-unique/rule-lhs}
        \(=\)
        \dsptikzfig{graphs/dpo/non-unique/rule-rhs}

        \vspace{3em}

        \only<1>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-1}}}%
        \only<2>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-2b}}}%
        \only<3>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-3b}}}%
        \only<4>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique/derivation-animation/step-4b}}}%
    \end{minipage}
    \quad
    \begin{minipage}{0.65\textwidth}
        \newcommand{\dposcale}{0.75}
        \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/l}}
            \arrow{d}
            \&
            \arrow{l}
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/k}}
            \arrow{d}
            \arrow{r}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/r}}
            \arrow{d}
            \\
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/g}}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/c-2}}
            \arrow{l}
            \arrow{r}
            \&
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/h-2}}
            \\
            \&
            \arrow{ul}
            \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique/j-2}}
            \arrow{u}
            \arrow{ur}
        \end{tikzcd}
    \end{minipage}
\end{frame}
\begin{frame}
    \frametitle{It's two, actually (comonoid style)}

    \centering

    \begin{minipage}{0.3\textwidth}
        \centering
        \dsptikzfig{graphs/dpo/non-unique-comonoid/rule-lhs}
        \(=\)
        \dsptikzfig{graphs/dpo/non-unique-comonoid/rule-rhs}

        \vspace{3em}

        \only<1>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique-comonoid/derivation-animation/step-1}}}%
        \only<2>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique-comonoid/derivation-animation/step-2a}}}%
    \end{minipage}
    \quad
    \newcommand{\dposcale}{0.75}
    \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/l}}
        \arrow{d}
        \&
        \arrow{l}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/k}}
        \arrow{d}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/r}}
        \arrow{d}
        \\
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/g}}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/c1}}
        \arrow{l}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/h1}}
        \\
        \&
        \arrow{ul}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/j}}
        \arrow{u}
        \arrow{ur}
    \end{tikzcd}
\end{frame}
\begin{frame}
    \frametitle{It's two, actually (comonoid style)}

    \centering

    \begin{minipage}{0.3\textwidth}
        \centering
        \dsptikzfig{graphs/dpo/non-unique-comonoid/rule-lhs}
        \(=\)
        \dsptikzfig{graphs/dpo/non-unique-comonoid/rule-rhs}

        \vspace{3em}

        \only<1>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique-comonoid/derivation-animation/step-1}}}%
        \only<2>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique-comonoid/derivation-animation/step-2b}}}%
        \only<3>{\scalebox{0.75}{\dsptikzfig{graphs/dpo/non-unique-comonoid/derivation-animation/step-3b}}}%
    \end{minipage}
    \quad
    \newcommand{\dposcale}{0.75}
    \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/l}}
        \arrow{d}
        \&
        \arrow{l}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/k}}
        \arrow{d}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/r}}
        \arrow{d}
        \\
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/g}}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/c2}}
        \arrow{l}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/h2}}
        \\
        \&
        \arrow{ul}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/non-unique-comonoid/j}}
        \arrow{u}
        \arrow{ur}
    \end{tikzcd}
\end{frame}


\begin{frame}
    \frametitle{Remember me?}

    \centering
    \dsptikzfig{strings/traced/trace-rhs}[f][white]
    \(=\)
    \dsptikzfig{circuits/examples/reasoning/unfolding/unfolding-3}[f][white]

\end{frame}
\begin{frame}
    \frametitle{Unfolding again}

    \centering
    \newcommand{\dposcale}{0.75}
    \begin{tikzcd}[column sep = small, row sep = small, ampersand replacement=\&]
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/l}}
        \arrow{d}
        \&
        \arrow{l}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/k}}
        \arrow[visible on=<2->]{d}
        \arrow{r}
        \&
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/r}}
        \arrow[visible on=<3->]{d}
        \\
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/g}}
        \&
        |[visible on=<2->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/c-1}}
        \arrow[visible on=<2->]{l}
        \arrow[visible on=<3->]{r}
        \&
        |[visible on=<3->]| \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/h-1}}
        \\
        \&
        \arrow{ul}
        \scalebox{\dposcale}{\dsptikzfig{graphs/dpo/unfolding/j-1}}
        \arrow[visible on=<2->]{u}
        \arrow[visible on=<3->]{ur}
    \end{tikzcd}

\end{frame}